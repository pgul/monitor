
prefix=@prefix@
COPT=-Wall -funsigned-char @DEFS@ -DCONFDIR=\"@sysconfdir@\" @CFLAGS@

all:	monitor

monitor:	monitor.o acl.o stat.o config.o getclass.o
	gcc $(COPT) @LDFLAGS@ -o monitor monitor.o acl.o stat.o config.o getclass.o @LIBS@
monitor.o:	monitor.c monitor.h
	gcc $(COPT) -o monitor.o -c monitor.c
acl.o:		acl.c monitor.h
	gcc $(COPT) -o acl.o -c acl.c
stat.o:		stat.c monitor.h
	gcc $(COPT) -o stat.o -c stat.c
config.o:	config.c monitor.h
	gcc $(COPT) -o config.o -c config.c
getclass.o:	getclass.c monitor.h
	gcc $(COPT) -o getclass.o -c getclass.c

testacl:	acl.c monitor.h
	gcc $(COPT) @LDFLAGS@ -DDEBUG=1 -o testacl acl.c

install:	all
	install monitor $(prefix)/bin
	install monitor.conf @sysconfdir@
